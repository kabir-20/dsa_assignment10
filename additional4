#include <iostream>
#include <unordered_set>
using namespace std;

struct Node {
    int data;
    Node* next;
    Node(int d) : data(d), next(NULL) {}
};

Node* insertEnd(Node* head, int val) {
    Node* n = new Node(val);
    if (!head) return n;
    Node* t = head;
    while (t->next) t = t->next;
    t->next = n;
    return head;
}

void print(Node* head) {
    while (head) {
        cout << head->data << " ";
        head = head->next;
    }
}

Node* getIntersection(Node* h1, Node* h2) {
    unordered_set<int> s;
    Node* res = NULL;

    while (h1) {
        s.insert(h1->data);
        h1 = h1->next;
    }

    while (h2) {
        if (s.find(h2->data) != s.end())
            res = insertEnd(res, h2->data);
        h2 = h2->next;
    }

    return res;
}

Node* getUnion(Node* h1, Nod
